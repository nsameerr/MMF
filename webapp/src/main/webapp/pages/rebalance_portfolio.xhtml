<?xml version="1.0" encoding="windows-1252"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>
    <body onload="stopPageSpinner();">
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-WV7G82"
                    height="0" width="0" style="display:none;visibility:hidden">
            </iframe>
        </noscript>
        <script>
            (function (w, d, s, l, i) {
                w[l] = w[l] || [];
                w[l].push({'gtm.start':
                            new Date().getTime(), event: 'gtm.js'});
                var f = d.getElementsByTagName(s)[0],
                        j = d.createElement(s), dl = l !== 'dataLayer' ? '&amp;l=' + l : '';
                j.async = true;
                j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
                f.parentNode.insertBefore(j, f);
            })(window, document, 'script', 'dataLayer', 'GTM-WV7G82');
        </script>
        
         <script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		
		  ga('create', 'UA-69307705-1', 'auto');
		  ga('send', 'pageview');
		</script>
        <!-- End Google Tag Manager -->

        <ui:composition template="/pages/template/content_page_layout.xhtml"
                        xmlns:compo="http://java.sun.com/jsf/composite/composite">
            <ui:define name="title">Rebalance Portfolio | ManageMyFortune.com</ui:define>
            <ui:define name="sidebar">
                <ui:include src="/pages/template/components/sidebar_user.xhtml" />
            </ui:define>           
            <ui:define name="content"> 
                <h:form id="rebalance_portfolio_form">
                    <div class="content section">
                        <div id="pad-wrapper">
                            <h2 class="page-title">Rebalance Portfolio</h2>
                            <div class="row-fluid two-baseline-margin-bottom">

                                <div class="row-fluid two-baseline-margin-bottom">

                                    <div class="span2 align_center">
                                        <label for="" style="font-weight: bold;">Name </label>
                                        <p>#{rebalanceportfoliocontroller.customerPortfolioVO.portfolioName}</p>
                                    </div>

                                    <div class="span2 align_center">
                                        <label for="" style="font-weight: bold;">Benchmark Index</label>
                                        <p>#{rebalanceportfoliocontroller.customerPortfolioVO.benchmarkName}</p>
                                    </div>

                                    <div class="span2 align_center">
                                        <label for="" style="font-weight: bold;">Potfolio Style</label>
                                        <p>#{rebalanceportfoliocontroller.customerPortfolioVO.porfolioStyleName}</p>
                                    </div>  
                                    <div class="span2 align_center">
                                        <label for="" style="font-weight: bold;">Ledger Balance</label>
                                        <p>#{rebalanceportfoliocontroller.ledger}</p>
                                    </div>

                                    <div class="span2 align_center">
                                        <label for="" style="font-weight: bold;">Additional Trans.Amt</label>
                                        <p>#{rebalanceportfoliocontroller.additionalAmt}</p>
                                    </div>

                                    <div class="align_center">
                                        <label for="" style="font-weight: bold;">Buying Power</label>
                                        <p>#{rebalanceportfoliocontroller.buyinPower}</p>
                                    </div>     
                                </div>     
                            </div>

                            <div class="row-fluid">
                                <div class="span4 donut">
                                    <div id="recommended-donut" class="donut-placeholder"></div>
                                    <h2>Your Portfiolio</h2>
                                </div>
                                <div class="span4">
                                    <h:commandLink value="Execute" styleClass="btn-flat primary"
                                                   actionListener="#{rebalanceportfoliocontroller.execute}"
                                                   action="#{rebalanceportfoliocontroller.getreDirectionUrl()}"
                                                   rendered="#{(rebalanceportfoliocontroller.isexecuteportfolio() and rebalanceportfoliocontroller.rebalaance) and !rebalanceportfoliocontroller.holiday_Venue and !rebalanceportfoliocontroller.disableButton and !rebalanceportfoliocontroller.allMFflag}">
                                    </h:commandLink>

                                    <h:outputLabel rendered="#{(rebalanceportfoliocontroller.isexecuteportfolio() and rebalanceportfoliocontroller.rebalaance)and !rebalanceportfoliocontroller.holiday_Venue and !rebalanceportfoliocontroller.disableButton}" 
                                                   style="cursor: default;margin-right:0;">
                                        <div class="execute-arrow"></div>
                                        <div>
                                            <font style="font-size: 12px;padding-left: 60px;float: left;max-width: 203px;">#{rebalanceportfoliocontroller.msgRebalance}</font>
                                        </div>
                                    </h:outputLabel> 

                                    <h:outputLabel rendered="#{rebalanceportfoliocontroller.disableButton }" 
                                                   style="cursor: default;margin-right:0;">
                                        <div class="execute-arrow"></div>
                                        <div>
                                            <font style="font-size: 12px;padding-left: 60px;float: left;max-width: 203px;">No change identified in portfolio</font>
                                        </div>
                                    </h:outputLabel> 

                                    <h:outputLabel rendered="#{!rebalanceportfoliocontroller.rebalaance and !rebalanceportfoliocontroller.holiday_Venue and !rebalanceportfoliocontroller.disableButton}" style="cursor: default;width: 105%; margin-top: 50%;">
                                        <div class="execute-arrow"></div>
                                        <div>
                                            <font style="font-size: 12px;padding-left: 50px;float: left;max-width: 203px;">#{rebalanceportfoliocontroller.msgRebalance}</font>
                                        </div>
                                    </h:outputLabel>


                                    <h:outputLabel rendered="#{rebalanceportfoliocontroller.holiday_Venue}" style="cursor: default;width: 105%; margin-top: 50%;">
                                        <div class="execute-arrow"></div>
                                        <div>
                                            <font style="font-size: 12px;padding-left: 120px;float: left;max-width: 203px;">#{rebalanceportfoliocontroller.venue_Holiday_Msg}</font>
                                        </div>
                                    </h:outputLabel> 
                                </div>
                                <div class="span4 donut">
                                    <div id="target-donut" class="donut-placeholder"></div>
                                    <h2>Target Portfiolio</h2>
                                </div>
                            </div>

                            <div class="table-wrapper orders-table hidden-phone">
                                <div>
                                    <center>
                                        <h:outputText id="msg1" styleClass="err_message" style="margin: 0px auto;" 
                                                      value="#{rebalanceportfoliocontroller.timeAlertMessage}" rendered="#{rebalanceportfoliocontroller.timeFlag}"/>
                                    </center>
                                </div>
                                <div class="row-fluid">
                                    <h3 class="title no-margin-bottom" style="width: 99%;">Allocation</h3>
                                    <h:panelGroup id="securites_table">
                                        <table class="table table-hover" >
                                            <thead>
                                                <tr class="top-row" style="width:100% !important">
                                                    <!--<th colspan="2" class="head">Assets</th>
                                                    <th colspan="4" class="head current" >Current</th>
                                                    <th colspan="2" class="head recommended">Recommended</th>
                                                    <th colspan="3" class="head recommended">Rebalance Transaction</th> -->
                                                    <th colspan="4" class="head">Assets</th>
                                                    <th colspan="4" class="head current" >Current</th>
                                                    <th colspan="2" class="head recommended">Recommended</th>
                                                    <th colspan="3" class="head recommended">Rebalance Transaction</th>
                                                </tr>

                                                <tr style="width:100% !important">
                                                    <th class="align_center">Asset class</th>
                                                    <th></th>
                                                    <th class="align_center">Asset name</th>
                                                    <th></th>
                                                    <th class="left-border align_center">units</th>
                                                    <th class="align_center">price</th>
                                                    <th class="align_center">value</th>
                                                    <!-- <th class="left-border align_center">Acqisition Cost</th>
                                                     <th class="left-border align_center">Gain / Loss</th>-->
                                                    <th class="align_center">weight</th>
                                                    <th class="left-border align_center">allocation</th>
                                                    <th class="align_center">range</th>
                                                    <!-- <th class="align_center">price</th> -->
                                                    <!-- <th class="left-border align_center">price tolerance</th> -->
                                                    <th class="align_center">buy/sell</th>
                                                    <th class="align_center">units</th>
                                                    <th class="align_center">amount</th>
                                                </tr>
                                            </thead> 
                                            <tbody>
                                                <c:forEach items="#{rebalanceportfoliocontroller.portfolioDetailsVOList}" var="assetList">
                                                    <tr class="subhead">
                                                        <th>#{assetList.assetClassName.toUpperCase()}</th>
                                                        <th></th>
                                                        <th></th>
                                                        <th></th>
                                                        <th></th> 
                                                        <th></th>
                                                        <th class="align_right">
                                                            <ui:fragment rendered="#{assetList.assetClassName == 'Cash'}">
                                                                <i class="rupees"> <span class="WebRupee">Rs.</span></i>
                                                                <h:outputText rendered="#{assetList.assetClassName == 'Cash'}"
                                                                              value="#{rebalanceportfoliocontroller.customerPortfolioVO.cashAmount + rebalanceportfoliocontroller.customerPortfolioVO.blockedCash}">
                                                                    <f:convertNumber groupingUsed="true" maxFractionDigits="2" minFractionDigits="2"/>
                                                                </h:outputText>
                                                            </ui:fragment>
                                                        </th> 
                                                        <th class="align_right" >
                                                            <h:outputText value="#{assetList.currentWeight}">
                                                                <f:convertNumber pattern="#0.00"/>
                                                            </h:outputText> %
                                                        </th>
                                                        <th class="align_right">
                                                            <h:outputText value="#{assetList.newAllocation}">
                                                                <f:convertNumber pattern="#0"/>
                                                            </h:outputText> %
                                                        </th>
                                                        <th class="align_right">
                                                            <h:outputText value="#{assetList.minimumRange}">
                                                                <f:convertNumber pattern="#0"/>
                                                            </h:outputText>
                                                            - 
                                                            <h:outputText value="#{assetList.maximumRange}">
                                                                <f:convertNumber pattern="#0"/>
                                                            </h:outputText> %
                                                        </th>
                                                        <th></th>
                                                        <th></th>
                                                        <th></th>
                                                    </tr>  

                                                    <ui:repeat value="#{assetList.securities}" var="securitiesList">
                                                        <tr>
                                                            <td colspan="4" style="max-width: 210px;padding-left: 25px !important;">#{securitiesList.scripDecription}</td>
                                                            <td class="align_right">
                                                                #{securitiesList.executedUnits}
                                                            </td>
                                                            <td class="align_right">
                                                                <i class="rupees"><span class="WebRupee">Rs.</span></i>
                                                                <!--style="color:{securitiesList.cmpTextColor};-->
                                                                <h:outputText value="#{securitiesList.currentPrice}" 
                                                                              style="font-weight: bolder;">
                                                                    <f:convertNumber groupingUsed="true" maxFractionDigits="4" minFractionDigits="4"/>
                                                                </h:outputText>
                                                            </td>
                                                            <!-- value -->
                                                            <td class="align_right"> 
                                                                <i class="rupees"><span class="WebRupee">Rs.</span></i>
                                                                <h:outputText value="#{securitiesList.currentValue}" >
                                                                    <f:convertNumber groupingUsed="true" maxFractionDigits="2" minFractionDigits="2"/>
                                                                </h:outputText>
                                                            </td>

                                                            <!-- aquisition value --> 
                                                            <!--
                                                            <td class="align_right"> 
                                                                <i class="rupees"><span class="WebRupee">Rs.</span></i>
                                                                <h:outputText value="{securitiesList.acquisitonValue}" >
                                                                    <f:convertNumber groupingUsed="true" maxFractionDigits="2" minFractionDigits="2"/>
                                                                </h:outputText> 
                                                            </td>-->
                                                            <!-- Gain / Loss --> 
                                                            <!--
                                                            <td class="align_right"> 
                                                                <i class="rupees"><span class="WebRupee">Rs.</span></i>
                                                                <h:outputText style="color: {securitiesList.gainOrLoss ? '':'red'}" value="{securitiesList.totalGainLoss}">
                                                                    <f:convertNumber groupingUsed="true" maxFractionDigits="2" minFractionDigits="2"/>
                                                                </h:outputText>-->
                                                            <!--
                                                            &#160;
                                                            <h:graphicImage id="trade_signal" url="{securitiesList.gainOrLoss ? '/img/add.png':'/img/minus.png'}"  
                                                                            style="height: 16px;width:16px;">
                                                            </h:graphicImage> 
                                                           
                                                        </td> -->

                                                            <td class="align_right">
                                                                <h:outputText value="#{securitiesList.currentWeight}">
                                                                    <f:convertNumber pattern="#0.00"/>
                                                                </h:outputText> %
                                                            </td>
                                                            <td class="align_right">
                                                                <h:outputText value="#{securitiesList.newAllocation}">
                                                                    <f:convertNumber pattern="#00.00"/>
                                                                </h:outputText> %
                                                            </td>
                                                            <td></td>
                                                            <!--
                                                            <td class="align_right">
                                                                <i class="rupees"><span class="WebRupee">Rs.</span></i><h:outputText value="{securitiesList.recommendedPrice}">
                                                                    <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                                                </h:outputText>
                                                            </td >
                                                            -->
                                                            <!--
                                                            <td class="align_right">
                                                                +/-{securitiesList.newToleranceNegativeRange} %
                                                            </td>
                                                            -->
                                                            <td class="align_right" style="color: #{securitiesList.buySellTextColor};">
                                                                <!--
                                                                <h:graphicImage id="mf_status" url="/img/error.png" title="Price below minimum subscription value"
                                                                                style="height: 16px;width:16px;margin-left: 10px" rendered="{securitiesList.buysellStatusText eq 'PBMS' and securitiesList.venueCode eq 'NSEMF'}"/>
                                                                -->
                                                                <h:outputText value="#{securitiesList.buysellStatusText}" 
                                                                              rendered="#{securitiesList.buysellStatusText eq 'SELL' || 
                                                                                          securitiesList.buysellStatusText eq 'BUY'}"/> 

                                                            </td>
                                                            <td class="align_right">
                                                                <h:outputText value="#{securitiesList.transactUnits}">
                                                                    <f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
                                                                </h:outputText>
                                                            </td>
                                                            <td >
                                                                <h:graphicImage id="status" url="#{securitiesList.buysellStatusText eq 'SELL'?'/img/left.png':'/img/greenArrow.png'}" 
                                                                                style="height: 16px;width:16px;margin-left: 10px" rendered="#{securitiesList.buysellStatusText eq 'SELL' || securitiesList.buysellStatusText eq 'BUY'}"/>
                                                                <span style="float: right;">
                                                                    <i class="rupees"><span class="WebRupee">Rs.</span></i><h:outputText 
                                                                        value="#{securitiesList.transactAmount}">
                                                                        <f:convertNumber groupingUsed="true" maxFractionDigits="2" minFractionDigits="2"/>
                                                                    </h:outputText>
                                                                </span>

                                                            </td>
                                                        </tr>
                                                    </ui:repeat>
                                                </c:forEach>
                                                <tr class="subhead">
                                                    <th>TOTAL</th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <!--
                                                    <th class="align_right">
                                                        <i class="rupees"><span class="WebRupee">Rs.</span></i>
                                                        <h:outputText 
                                                            value="{rebalanceportfoliocontroller.customerPortfolioVO.totalAcquisition}">
                                                            <f:convertNumber groupingUsed="true" maxFractionDigits="2" minFractionDigits="2"/>
                                                        </h:outputText>
                                                    </th>
                                                    <th class="align_right">
                                                        <i class="rupees"><span class="WebRupee">Rs.</span></i>
                                                        <h:outputText 
                                                            value="{rebalanceportfoliocontroller.customerPortfolioVO.totalGainLossValue}">
                                                            <f:convertNumber groupingUsed="true" maxFractionDigits="2" minFractionDigits="2"/>
                                                        </h:outputText>
                                                    </th>
                                                    -->
                                                    <th></th>
                                                    <th></th>
                                                    <th class="align_right">
                                                        <i class="rupees"><span class="WebRupee">Rs.</span></i>
                                                        <h:outputText 
                                                            value="#{rebalanceportfoliocontroller.customerPortfolioVO.currentValue}">
                                                            <f:convertNumber groupingUsed="true" maxFractionDigits="2" minFractionDigits="2"/>
                                                        </h:outputText>
                                                    </th>
                                                    <th></th>
                                                    <th class="align_right">100%</th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <th class="align_right">
                                                        <i class="rupees"><span class="WebRupee">Rs.</span></i>
                                                        <h:outputText 
                                                            value="#{rebalanceportfoliocontroller.customerPortfolioVO.totalTransAmt}">
                                                            <f:convertNumber groupingUsed="true" maxFractionDigits="2" minFractionDigits="2"/>
                                                        </h:outputText>
                                                    </th>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <table>
                                            <tr>
                                                <td>
                                                    <span style="color:red">*</span>
                                                    <h:outputText value="Cash Include blocked amount" class="align_left">
                                                    </h:outputText>
                                                </td>  
                                            </tr>
                                        </table>
                                    </h:panelGroup>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p:dialog  id="dialog" resizable="false" visible="#{!rebalanceportfoliocontroller.online and rebalanceportfoliocontroller.placeOrder}" closable="false" header=""
                               style="display: block;height: 500px;width: 850px;margin-left: 49%;margin-top: 19%;"  widgetVar="dialog" 
                               modal="true" showEffect="none" hideEffect="fade" draggable="true"> 
                        <div class="content-wrap">
                            <table width="100%" height="100%" class="outerTable">
                                <tbody>
                                    <tr>
                                        <td valign="middle">
                                            <table class="loginTable" border="0" align="center" cellpadding="0" cellspacing="0">
                                                <tbody>
                                                    <tr>
                                                        <td colspan="2" class="login_head">
                                                            <img src="#{request.contextPath}/img/bnp_logo_lite.png"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2" class="login_input">
                                                            <h:outputText value="You are not allowed to place offline order."
                                                                          rendered="#{!rebalanceportfoliocontroller.offlinee_Enabled and !rebalanceportfoliocontroller.online}">
                                                            </h:outputText>
                                                            <h:outputText value="#{rebalanceportfoliocontroller.oflineMsg}"
                                                                          rendered="#{rebalanceportfoliocontroller.offlinee_Enabled and !rebalanceportfoliocontroller.online}">
                                                                <div class="text">Do you want to place the order as offline?</div>
                                                            </h:outputText>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2" class="login_submitCell">
                                                            <h:commandButton styleClass="login_submit" value="Yes"
                                                                             rendered="#{rebalanceportfoliocontroller.offlinee_Enabled and !rebalanceportfoliocontroller.online}"
                                                                             actionListener="#{rebalanceportfoliocontroller.placeOfflineYes()}"
                                                                             action="#{rebalanceportfoliocontroller.getReDirectionUrl()}"
                                                                             onclick='startPageSpinner();' onblur='stopPageSpinner();'>

                                                            </h:commandButton> &#160;
                                                            <h:commandButton styleClass="login_submit" value="No"
                                                                             rendered="#{rebalanceportfoliocontroller.offlinee_Enabled and !rebalanceportfoliocontroller.online}"
                                                                             actionListener="#{rebalanceportfoliocontroller.placeOfflineNo()}"
                                                                             action="#{rebalanceportfoliocontroller.getReDirectionUrl()}"
                                                                             onclick='startPageSpinner();' onblur='stopPageSpinner();'>

                                                            </h:commandButton>&#160;
                                                            <h:button styleClass="login_submit" value="Ok" style="margin-left: 85px;"
                                                                      rendered="#{!rebalanceportfoliocontroller.offlinee_Enabled and !rebalanceportfoliocontroller.online}"
                                                                      outcome="/pages/rebalance_portfolio?faces-redirect=true">
                                                            </h:button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </p:dialog>
                    <p:remoteCommand name="updateWatches" async="true" 
                                     action="#{rebalanceportfoliocontroller.updateCMP()}"
                                     update="securites_table"/>
                </h:form>    
                <!-- scripts for this page -->
                <style type="text/css">
                    .donut h2 {
                        text-align: center;
                        line-height: 40px;
                        color: #555;
                        margin-bottom: 24px;
                        font-size: 18px;
                        font-weight: bold;
                        text-transform: uppercase;
                        letter-spacing: 1px;
                        margin-top: -24px;
                    }

                    .primary {
                        margin: 38% auto 2%;
                        width: 170px;
                        text-transform: uppercase;
                        font-weight: 600;
                        letter-spacing: 2px;
                        font-size: 16px;
                        padding: 18px 14px;
                        display: block;
                    }

                    label {
                        display: block;
                    }

                    .donut-placeholder {
                        height: 385px;
                    }
                    #flotTip 
                    {
                        padding: 3px 5px;
                        background-color: #2E8E0C;
                        z-index: 100;
                        color: #fff;
                        box-shadow: 0 0 10px #555;
                        opacity: .7;
                        filter: alpha(opacity=70);
                        border: 2px solid #fff;
                        -webkit-border-radius: 4px;
                        -moz-border-radius: 4px;
                        border-radius: 4px;
                    }   
                </style>
                <script src="#{request.contextPath}/js/jquery.js"></script>
                <script src="#{request.contextPath}/js/bootstrap.min.js"></script>
                <script type="text/javascript">
                    $(function() {
                        $('.dropdown-toggle').dropdown();
                    });
                    $(function() {
                        $('#sidebar-nav.').addClass('display');
                    });
                </script>
                <script src="#{request.contextPath}/js/jquery-ui-1.10.2.custom.min.js"></script>

                <!-- call all plugins -->
                <script src="#{request.contextPath}/js/theme.js"></script>

                <!-- pie-chart -->
                <script src="#{request.contextPath}/lib/flot/jquery.flot.js"></script>
                <script src="#{request.contextPath}/lib/flot/jquery.flot.pie.js"></script>
                <script src="#{request.contextPath}/js/jquery.flot.tooltip.js"></script>

                <script type="text/javascript">
                    var _int = self.setInterval(function() {
                        updateWatches();
                    }, 5000);

                    var customerdata = JSON.parse('#{rebalanceportfoliocontroller.recommendedPieChartData()}');
                    $.plot('#recommended-donut', customerdata, {
                        series: {
                            pie: {
                                innerRadius: 0.5,
                                show: true,
                                label: {
                                    show: true,
                                    radius: 0.85,
                                    formatter: labelFormatter,
                                    background: {
                                        opacity: 1,
                                        color: 'transparent'
                                    },
                                    threshold: 0.05
                                }, stroke: {
                                    width: 5,
                                    color: '#ffffff'
                                }

                            }
                        }, legend: {
                            show: false
                        },
                        grid: {
                            hoverable: true
                        },
                        tooltip: true,
                        tooltipOpts: {
                            content: "%p.0%, %s", // show percentages, rounding to 2 decimal places
                            shifts: {
                                x: 20,
                                y: 0
                            },
                            defaultTheme: false
                        }
                    });

                    var targetdata = JSON.parse('#{rebalanceportfoliocontroller.targetPieChartData()}');
                    $.plot('#target-donut', targetdata, {
                        series: {
                            pie: {
                                innerRadius: 0.5,
                                show: true,
                                label: {
                                    show: true,
                                    radius: 0.85,
                                    formatter: labelFormatter,
                                    background: {
                                        opacity: 1,
                                        color: 'transparent'
                                    },
                                    threshold: 0.05
                                },
                                stroke: {
                                    width: 5,
                                    color: '#ffffff'
                                }

                            }
                        }, legend: {
                            show: false
                        },
                        grid: {
                            hoverable: true
                        },
                        tooltip: true,
                        tooltipOpts: {
                            content: "%p.0%, %s", // show percentages, rounding to 2 decimal places
                            shifts: {
                                x: 20,
                                y: 0
                            },
                            defaultTheme: false
                        }
                    });

                    function labelFormatter(label, series) {
                        return '<div class="donut-label">' + label + '<br/>' + Math.round(series.percent) + '%</div>';
                    }
                </script>
            </ui:define>
        </ui:composition>
    </body>
</html>
